<ion-header class="ion-no-border">
  <ion-toolbar>
    <ion-title>Request Details</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="onClose()">
        <ion-icon name="close-outline" type="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-content>
  <ion-grid>
    <ion-row>
      <ion-col>
        <ion-card>
          <ion-item lines="none">
            <ion-avatar slot="start">
              <img
                src="https://gravatar.com/avatar/dba6bae8c566f9d4041fb9cd9ada7741?d=identicon&f=y"
              />
            </ion-avatar>
            <ion-label>
              <h3>{{ request.requester }}</h3>
              <p>{{ request.contact }}</p>
            </ion-label>
          </ion-item>
          <ion-item lines="none">
            <ion-icon name="location" slot="start"></ion-icon>
            <ion-label class="ion-text-wrap">
              <p>{{ request.location?.address }}</p>
            </ion-label>
          </ion-item>
          <ion-item lines="none" id="submitter-info">
            <ion-label>
              <p>{{ request.submittedBy.name }}</p>
            </ion-label>
            <ion-label class="ion-text-right">
              <p>{{ request.submittedOn | date }}</p>
            </ion-label>
          </ion-item>
          <ion-item lines="none">
            <ion-label>
              <p>{{ request.requestStatus?.desc }}</p>
            </ion-label>
            <ion-label class="ion-text-right">
              <p>{{ request.updatedOn | date }}</p>

            </ion-label>
          </ion-item>
          <ion-item lines="none" *ngIf="request.assignedTo">
            <ion-icon name="person" slot="start"></ion-icon>
            <ion-label class="ion-text-wrap">
              <h3>{{ request.assignedTo.name }}</h3>
            </ion-label>
          </ion-item>
          <ion-item lines="none" *ngIf="request.assignedTo">
            <ion-icon name="call" slot="start"></ion-icon>
            <ion-label>
              <p>{{ request.assignedTo.mobile }}</p>
            </ion-label>
          </ion-item>
          <ion-item lines="none" *ngIf="request.assignedTo">
            <ion-icon name="location" slot="start"></ion-icon>
            <ion-label class="ion-text-wrap">
              <p>{{ request.assignedTo.location.address }}</p>
            </ion-label>
          </ion-item>
        </ion-card>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col class="ion-text-center">
        <ng-content
          *ngIf="isDonar | async; then aBlock; else bBlock"
        ></ng-content>
        <ng-template #aBlock
          ><ion-button class="primary" expand="clear" (click)="onUpdate()"
            >Update</ion-button
          ></ng-template
        >
        <ng-template #bBlock>
          <ion-button
            *ngIf="
              request.requestStatus.desc === 'Submitted' ||
              request.requestStatus.desc === 'Processing'
            "
            class="primary"
            expand="clear"
            (click)="onCancel()"
            >Cancel</ion-button
          ></ng-template
        >
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>

<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button
        *ngIf="!isNewProfile"
        defaultHref="/discover"
      ></ion-back-button>
    </ion-buttons>
    <ion-title size="small" *ngIf="isNewProfile"
      >Complete your profile</ion-title
    >
    <ion-title size="small" *ngIf="!isNewProfile"
      >Update your profile</ion-title
    >
  </ion-toolbar>
</ion-header>

<ion-progress-bar type="indeterminate" *ngIf="showProgess"></ion-progress-bar>

<ion-content>
  <ion-item>
    <ion-label position="floating">Email</ion-label>
    <ion-input [(ngModel)]="user.email" disabled="true"></ion-input>
    <ion-icon name="mail" slot="start"></ion-icon>
  </ion-item>
  <ion-item>
    <ion-label position="floating">Name</ion-label>
    <ion-input
      [(ngModel)]="user.name"
      placeholder="Enter your name"
      required
    ></ion-input>
    <ion-icon name="person" slot="start"></ion-icon>
  </ion-item>
  <ion-item>
    <ion-label position="floating">Location</ion-label>
    <ion-input
      readonly
      (click)="openLocationPicker()"
      [(ngModel)]="user.location.address"
      class="ion-text-wrap"
      placeholder="Click to open location picker"
      required
    ></ion-input>
    <ion-icon name="locate" slot="start"></ion-icon>
  </ion-item>
  <ion-item>
    <ion-label position="floating">Contact</ion-label>
    <ion-input
      [(ngModel)]="user.mobile"
      placeholder="Enter contact number"
      type="number"
      required
    ></ion-input>
    <ion-icon name="call" slot="start"></ion-icon>
  </ion-item>
  <ion-item *ngIf="roles">
    <ion-label position="floating">Profile Type</ion-label>
    <ion-select
      placeholder="Select profile type"
      [(ngModel)]="selectedRoleID"
      (ionChange)="profileChosen()"
      required
    >
      <ion-select-option *ngFor="let role of roles" [value]="role._id "
        >{{ role.name }}</ion-select-option
      >
    </ion-select>
    <ion-icon name="briefcase" slot="start"></ion-icon>
  </ion-item>
  <ion-item *ngIf="isDonor">
    <ion-label position="floating">Quantity</ion-label>
    <ion-input
      [(ngModel)]="user.quantity"
      placeholder="Enter no of cylinders"
      type="number"
      required
    ></ion-input>
    <ion-icon name="cart" slot="start"></ion-icon>
  </ion-item>
</ion-content>

<ion-footer>
  <ion-grid>
    <ion-row>
      <ion-col class="ion-text-center">
        <ion-button
          *ngIf="isNewProfile"
          (click)="createProfile()"
          expand="clear"
          >
          <ion-icon name="save"></ion-icon>
          Create</ion-button
        >
        <ion-button
          *ngIf="!isNewProfile"
          (click)="updateProfile()"
          expand="clear"
          >
          <ion-icon name="checkmark"></ion-icon>
          Update</ion-button
        >
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-footer>
